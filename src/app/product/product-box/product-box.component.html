
<div appImagePlaceholder class="content--grid">
        <ng-container *ngIf="(isBigSize$ |async) else smallBox" >
        <div  class="mat-h4 p2 inline--centred">
                <button  #pulsingButton [appFavoriteHandler]="product?.id" mat-icon-button>
                        <mat-icon  [inline]="!(isBigSize$ |async)" #favIcon>favorite</mat-icon>
                </button>
                <section >
                        <p #pulsingText>{{product.designation | uppercase}}</p>
                        <p #pulsingText class="mat-caption font--dark-grey">
                                <span  #toHideLoading  class="mat-caption"
                                [routerLink]="['/product/list']"  [queryParams]="{categories__designation__in: product.rootCategory}" queryParamsHandling="merge"
                                *ngIf="(isSearchActive |async) || (isFavoriteRoute |async)" class="font--dark-grey mat-caption">
                                        {{(rootCat$ |async)?.designation}} /
                        </span >
                                {{(selectedAppearanceVariant$|async)?.look.texture}} {{(selectedAppearanceVariant$|async)?.look.material}}</p>


               </section>
               <button (click)="toggleModal('userRequestBox')" #pulsingButton class="font--dark-grey mat-icon--full-right" mat-icon-button>
                        <mat-icon i18n>message</mat-icon>
                </button>
        </div>
        <a #loadingImage [routerLink]="['/product', product.id]">
        <img #targetImage  class='content__thumbnail' [src]="(selectedAppearanceVariant$|async)?.thumbNail | mergeSizeQs:500">
        </a>

        <section class="my2 mx4 content-information">
               <p #pulsingText class="mat-body font--dark-grey">{{product.shortDescription}}</p>
        </section>

        <section  #toHideLoading  class="mt4 px4  inline--centred">

                <app-appearance-selector
                        (selectedAppearanceVariant) = "setAppearanceVariant($event)"
                        [appearanceVariants]="product.appearanceVariants">
                </app-appearance-selector>
        </section>
        <section  *ngIf="isBigSize$ |async" class="p4  inline--centred">
            <button #pulsingButton (click)="toggleDimension()" color="primary" class="mr4" mat-flat-button>
                <span>Technical details</span>
                <mat-icon [class.icon--rotate]="isDimensionOpen">
                        keyboard_arrow_down
                </mat-icon>
            </button>
        </section>
        <section class="p4 details-container"
                [@verticalAccordionAnimation]
                *ngIf="isDimensionOpen">
                <section>
                  <app-product-dimensions
                  [productDimensions]="product.dimensionsSpecifications">
          </app-product-dimensions>
                </section>

                <section>
                  <app-product-materials
                  [product]="product">
          </app-product-materials>
                </section>

                <section>
                  <app-product-component [componentsSpecs]="product.componentsSpecifications">

                  </app-product-component>
                </section>

</section>
</ng-container>
</div>




<ng-template #smallBox>
        <a #loadingImage [routerLink]="['/product', product.id]">
                <img #targetImage  class='content__thumbnail' [src]="(selectedAppearanceVariant$|async)?.thumbNail | mergeSizeQs:400">
        </a>
        <section class="mx4">
                <p class="mat-body"  #pulsingText>{{product.designation | uppercase}}</p>
                <p #pulsingText class="mat-caption font--dark-grey">
                        <span #pulsingText class="mat-caption"
                        [routerLink]="['/product/list']"  [queryParams]="{categories__designation__in: product.rootCategory}" queryParamsHandling="merge"
                        *ngIf="(isSearchActive |async) || (isFavoriteRoute |async)" class="font--dark-grey mat-caption">
                                {{product.rootCategory}} /
                </span >
                        {{(selectedAppearanceVariant$|async)?.look.texture}} {{(selectedAppearanceVariant$|async)?.look.material}}</p>

         </section>
         <mat-divider class="my2"></mat-divider>
         <section  #toHideLoading  class="px4 mb2 inline--centred">

                <app-appearance-selector
                        mode = "MINIMAL"
                        (selectedAppearanceVariant) = "setAppearanceVariant($event)"
                        [appearanceVariants]="product.appearanceVariants">
                </app-appearance-selector>
        </section>
</ng-template>
